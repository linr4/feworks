<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Clock</title>

    <style>

        .wrapper {

        }

        #clock {
            border: 1px solid #000;
            width: 600px;
            height: 600px;
            margin: 20px;
            background: url("images/clock.jpg") no-repeat;

            /* 用子绝父相的方法定位指针到表盘中心 */
            position: relative;
        }

        #hour, #minute, #second {
            width: 30px;
            height: 100%;

            position: absolute;
            top: 0;
            left: 50%;
            margin-left: -15px;
        }

        #hour {
            background: url("images/hour.png") no-repeat;
        }

        #minute {
            background: url("images/minute.png") no-repeat;
        }

        #second {
            background: url("images/second.png") no-repeat;
        }


        .desc {
            margin: 20px;
            font-family: 微软雅黑;
        }

        .desc dl {
            list-style: none;
        }

        .desc dl dt {
            font-weight: bold;
            font-size: 18px;
        }
        .desc dl dd {
            font-size: 14px;
            margin-top: 10px;
        }

        .desc dl dd span {
            font-weight: bold;
        }

    </style>
</head>
<body>

<!-- 画出表盘和3个指针 -->

<div class="wrapper">
    <div id="clock">
        <div id="hour"></div>
        <div id="minute"></div>
        <div id="second"></div>
    </div>
    <div class="desc">

        <dl>
            <dt>编写思路和步骤：</dt>
            <dd><span>结构：</span>用1个大div作表盘，嵌套3个小div作指针，均在css中设置背景图片实现；</dd>
            <dd><span>呈现：</span>表盘div通过设置margin居中，并设置相对定位属性；指针设置绝对定位属性，移到表盘中间；</dd>
            <dd><span>行为：</span>通过setInterval方法，定时设置指针的CSS3属性transform: rotate()使其旋转特定角度；</dd>
            <dd><span>逻辑：</span>通过Date()对象获取当前时间，通过相应方法分解出毫秒、秒、分、时，作为指针旋转角度的基准值；</dd>
            <dd><span>注意点：</span>指针旋转角度是线性的，如：8:00至8:59期间，时针从刻度8逐渐旋转至9，而非总是指向8，从8开始的增量等于相应已过的分钟数，计算旋转角度时需要加上；分针、秒针同理，需要加上 <span>下一级时间单位</span> 的增量。</dd>

        </dl>
    </div>
</div>

<script>

    window.onload = function () {

        // 1. 获取需要的标签
        var hour = document.getElementById('hour');
        var minute = document.getElementById('minute');
        var second = document.getElementById('second');

        // 2. 开启定时器
        var timeId = window.setInterval(function () {

            // 2.1 获取当前时间；
            // 时针的值要加上分钟数的原因：如在8点钟时，时针是在8点到9点之间移动、而非总是指在8点的刻度上，要加上分钟数以体现相应的位移；分针秒针同理；
            var date = new Date();
            var ms = date.getMilliseconds();
            var s = date.getSeconds() + ms / 1000;
            var m = date.getMinutes() + s / 60;
            var h = date.getHours() % 12 + m / 60;  // 获取的小时是24进制，需要除12取余数以转换成12进制；

            // 2.2 让指针转起来
            hour.style.transform = 'rotate(' + h * 30 + 'deg)';     // 时针1小时转30度
            minute.style.transform = 'rotate(' + m * 6 + 'deg)';    // 分针1分钟转6度
            second.style.transform = 'rotate(' + s * 6 + 'deg)';    // 秒针1秒钟转6度

        }, 500);


    }

</script>

</body>
</html>