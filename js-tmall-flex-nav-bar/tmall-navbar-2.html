<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>天猫弹性导航条 练习 - 第2遍</title>
    <style>

        body, ul, li {
            margin: 0;
            padding: 0;
        }

        body {
            background-color: lightpink;
        }

        #nav {
            width: 900px;
            height: 63px;
            background: white url("images/doubleEleven.png") right center no-repeat;
            border-radius: 10px;
            margin: 100px auto;

            position: relative;
        }

        #logo {
            width: 88px;
            height: 63px;
            background: url("images/tMall.png") no-repeat;

            position: absolute;
            left: 0;
          }
        
        ul {
            list-style: none;
            position: relative;
          }
        
        ul li {
            width: 88px;
            height: 63px;
            line-height: 70px;
            text-align: center;
            cursor: pointer;

            float: left;
        }

    </style>
</head>
<body>

<nav id="nav">
    <span id="logo"></span>
    <ul>
        <li>双11狂欢</li>
        <li>服装会场</li>
        <li>数码家电</li>
        <li>家具建材</li>
        <li>母婴童装</li>
        <li>手机会场</li>
        <li>美妆会场</li>
        <li>进口会场</li>
        <li>飞猪旅行</li>
    </ul>
</nav>

<script>

    window.addEventListener('load', function () {

        // 获取所需ID；
        var nav = document.getElementById('nav');
        var logo = nav.children[0];
        var ul = nav.children[1];
        var allLis = ul.children;
        var logoInitialPosX = 0, logoMoveToPosX = 0;

        // 通过for循环，设置每个li监听鼠标事件；
        for (var i = 0; i < allLis.length; i ++) {
            var li = allLis[i];

            li.addEventListener('mouseenter', function () {
                logoMoveToPosX = this.offsetLeft;   // 鼠标进入时，设置logo移动到该li的border-left位置；
            });

            li.addEventListener('click', function () {
                logoInitialPosX = this.offsetLeft;  // 鼠标点击时，重置logo的起始位置为当前li的border-left位置；
            });

            li.addEventListener('mouseout', function () {
                logoMoveToPosX = logoInitialPosX;   // 鼠标离开时，设置logo移回鼠标进入前所在的位置；
            });
        }

        // 通过setInterval() 响应鼠标事件，移动logo到相应位置；
        var logoMoveStep = 0;
        setInterval(function () {
            logoMoveStep = logoMoveStep + (logoMoveToPosX - logoMoveStep) * 0.2;    // 缓动动画公式，每个interval之后logoMoveStep会递增，递增值（步进速度）会几何级递减，并无限趋向等于logoMoveToPosX；
            logo.style.left = logoMoveStep + 'px';  // 通过修改绝对定位的left值来移动logo；
        }, 10);
    })

</script>

</body>
</html>