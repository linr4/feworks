<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JavaScript - Progress Bar</title>
    <style>
        #progress_bar {
            width: 1000px;
            height: 35px;
            margin: 100px auto;

            position: relative;
        }

        #progress_bar_bg {
            width: 900px;
            height: 35px;
            background-color: gray;

            border-radius: 8px;


        }

        #progress_bar_fg {
            width: 0;
            height: 35px;
            line-height: 51px;
            background-color: orangered;

            border-top-left-radius: 8px;
            border-bottom-left-radius: 8px;
        }

        #progress_tag {
            height: 51px;
            width: 20px;
            background-color: deepskyblue;

            border-radius: 5px;

            position: absolute;
            top: -8px;
            left: 0;
        }

        #progress_value {
            width: 90px;
            height: 35px;

            position: absolute;
            right: 0;
            top: 0;
            text-align: center;
            line-height: 35px;
        }

    </style>
</head>
<body>

    <section id="progress_bar">
        <div id="progress_bar_bg">
            <div id="progress_bar_fg">
                <span id="progress_tag"></span>
            </div>
        </div>
        <div id="progress_value">0%</div>
    </section>

    <script>
        window.onload = function () {
            var progress_bar_bg = document.getElementById('progress_bar_bg');
            var progress_bar_fg = document.getElementById('progress_bar_fg');
            var progress_tag = document.getElementById('progress_tag');
            var progress_value = document.getElementById('progress_value');

            // listen mousedown event on the moving tag

            progress_tag.onmousedown = function (objMouseDownEvent) {
                var mouseInitialPosX = objMouseDownEvent.clientX - this.offsetLeft;  // the initial X position of mouse movement

                document.onmousemove = function (objMouseMoveEvent) {
                    var mouseOffsetX = objMouseMoveEvent.clientX - mouseInitialPosX;    // the X offset of mouse movement

                    if (mouseOffsetX < 0) { // minimum offset of mouse movement
                        mouseOffsetX = 0;
                    } else if(mouseOffsetX > (progress_bar_bg.offsetWidth - progress_tag.offsetWidth)){ // maximum offset of mouse movement
                        mouseOffsetX = (progress_bar_bg.offsetWidth - progress_tag.offsetWidth);
                    }

                    // set the width of progress bar foreground and "left" position value of the Tag
                    progress_bar_fg.style.width = mouseOffsetX + 'px';
                    progress_tag.style.left = mouseOffsetX + 'px';


                    // display the percentage of the progress;

                    var mouseMoveOffsetPct = Math.floor(mouseOffsetX / (progress_bar_bg.offsetWidth - progress_tag.offsetWidth) * 100);
                    progress_value.innerText = mouseMoveOffsetPct + '%';

                    // change the color of the progress bar according to the percentage;

                    var colorR = ((100 - mouseMoveOffsetPct)/100) * 255;  // RED color is increasing along with the reducing of the progress;
                    var colorG = 0;
                    var colorB = mouseMoveOffsetPct/100 * 255;  // BLUE color is increasing along with the progress;

                    progress_bar_fg.style.backgroundColor = 'rgb('+ colorR + ',' + colorG + ',' + colorB + ')';


                };

                document.onmouseup = function () {
                    this.onmousemove = null;    // stop moving when mouse button is released;
                };
            }
        }

    </script>
</body>
</html>